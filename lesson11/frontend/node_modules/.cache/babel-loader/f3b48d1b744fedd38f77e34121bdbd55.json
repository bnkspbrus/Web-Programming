{"remainingRequest":"/home/nikita/WEB/lesson11/frontend/node_modules/babel-loader/lib/index.js!/home/nikita/WEB/lesson11/frontend/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/nikita/WEB/lesson11/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/nikita/WEB/lesson11/frontend/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/nikita/WEB/lesson11/frontend/src/App.vue","mtime":1640358482747},{"path":"/home/nikita/WEB/lesson11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/WEB/lesson11/frontend/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/nikita/WEB/lesson11/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/nikita/WEB/lesson11/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IEhlYWRlciBmcm9tICIuL2NvbXBvbmVudHMvSGVhZGVyIjsKaW1wb3J0IE1pZGRsZSBmcm9tICIuL2NvbXBvbmVudHMvTWlkZGxlIjsKaW1wb3J0IEZvb3RlciBmcm9tICIuL2NvbXBvbmVudHMvRm9vdGVyIjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBcHAnLAogIGNvbXBvbmVudHM6IHsKICAgIEZvb3RlcjogRm9vdGVyLAogICAgTWlkZGxlOiBNaWRkbGUsCiAgICBIZWFkZXI6IEhlYWRlcgogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IG51bGwsCiAgICAgIHBvc3RzOiBbXQogICAgfTsKICB9LAogIGJlZm9yZU1vdW50OiBmdW5jdGlvbiBiZWZvcmVNb3VudCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJqd3QiKSAmJiAhdGhpcy51c2VyKSB7CiAgICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uSnd0IiwgbG9jYWxTdG9yYWdlLmdldEl0ZW0oImp3dCIpKTsKICAgIH0KCiAgICBheGlvcy5nZXQoIi9hcGkvMS9wb3N0cyIpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIF90aGlzLnBvc3RzID0gcmVzcG9uc2UuZGF0YTsKICAgIH0pOwogIH0sCiAgYmVmb3JlQ3JlYXRlOiBmdW5jdGlvbiBiZWZvcmVDcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICB0aGlzLiRyb290LiRvbigib25FbnRlciIsIGZ1bmN0aW9uIChsb2dpbiwgcGFzc3dvcmQpIHsKICAgICAgaWYgKHBhc3N3b3JkID09PSAiIikgewogICAgICAgIF90aGlzMi4kcm9vdC4kZW1pdCgib25FbnRlclZhbGlkYXRpb25FcnJvciIsICJQYXNzd29yZCBpcyByZXF1aXJlZCIpOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS9qd3QiLCB7CiAgICAgICAgbG9naW46IGxvZ2luLAogICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZAogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCByZXNwb25zZS5kYXRhKTsKCiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkp3dCIsIHJlc3BvbnNlLmRhdGEpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uRW50ZXJWYWxpZGF0aW9uRXJyb3IiLCBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvblJlZ2lzdGVyIiwgZnVuY3Rpb24gKGxvZ2luLCBuYW1lLCBwYXNzd29yZCkgewogICAgICBpZiAocGFzc3dvcmQgPT09ICIiKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgIlBhc3N3b3JkIGlzIHJlcXVpcmVkIik7CiAgICAgIH0KCiAgICAgIGF4aW9zLnBvc3QoIi9hcGkvMS91c2Vycy9yZWdpc3RlciIsIHsKICAgICAgICBsb2dpbjogbG9naW4sCiAgICAgICAgbmFtZTogbmFtZSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkVudGVyIiwgbG9naW4sIHBhc3N3b3JkKTsKCiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvbkNoYW5nZVBhZ2UiLCAiSW5kZXgiKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgX3RoaXMyLiRyb290LiRlbWl0KCJvblJlZ2lzdGVyVmFsaWRhdGlvbkVycm9yIiwgZXJyb3IucmVzcG9uc2UuZGF0YSk7CiAgICAgIH0pOwogICAgfSk7CiAgICB0aGlzLiRyb290LiRvbigib25Kd3QiLCBmdW5jdGlvbiAoand0KSB7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJqd3QiLCBqd3QpOwogICAgICBheGlvcy5nZXQoIi9hcGkvMS91c2Vycy9hdXRoIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgand0OiBqd3QKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgX3RoaXMyLnVzZXIgPSByZXNwb25zZS5kYXRhOwoKICAgICAgICBfdGhpczIuJHJvb3QuJGVtaXQoIm9uQ2hhbmdlUGFnZSIsICJJbmRleCIpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi4kcm9vdC4kZW1pdCgib25Mb2dvdXQiKTsKICAgICAgfSk7CiAgICB9KTsKICAgIHRoaXMuJHJvb3QuJG9uKCJvbkxvZ291dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oImp3dCIpOwogICAgICBfdGhpczIudXNlciA9IG51bGw7CiAgICB9KTsgLy8gdGhpcy4kcm9vdC4kb24oIm9uV3JpdGVQb3N0IiwgKHRpdGxlLCB0ZXh0KSA9PiB7CiAgICAvLyAgIGlmICh0ZXh0ID09PSAiIikgewogICAgLy8gICAgIHRoaXMuJHJvb3QuJGVtaXQoIm9uV3JpdGVQb3N0VmFsaWRhdGlvbkVycm9yIiwgIlRleHQgaXMgcmVxdWlyZWQiKTsKICAgIC8vICAgICByZXR1cm47CiAgICAvLyAgIH0KICAgIC8vICAgY29uc3QgbG9naW4gPSB0aGlzLnVzZXIubG9naW47CiAgICAvLyAgIGF4aW9zLnBvc3QoIi9hcGkvMS9wb3N0cyIsIHt0aXRsZSwgdGV4dCwgbG9naW59KS50aGVuKCgpID0+IHsKICAgIC8vICAgICB0aGlzLiRyb290LiRlbWl0KCJvbkNoYW5nZVBhZ2UiLCApCiAgICAvLyAgIH0pCiAgICAvLyB9KQogIH0KfTs="},{"version":3,"sources":["App.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div id=\"app\">\n    <Header :user=\"user\"/>\n    <Middle :posts=\"posts\"/>\n    <Footer/>\n  </div>\n</template>\n\n<script>\nimport Header from \"./components/Header\";\nimport Middle from \"./components/Middle\";\nimport Footer from \"./components/Footer\";\nimport axios from \"axios\"\n\nexport default {\n  name: 'App',\n  components: {\n    Footer,\n    Middle,\n    Header\n  },\n  data: function() {\n    return {\n      user: null,\n      posts: []\n    }\n  },\n  beforeMount() {\n    if (localStorage.getItem(\"jwt\") && !this.user) {\n      this.$root.$emit(\"onJwt\", localStorage.getItem(\"jwt\"));\n    }\n\n    axios.get(\"/api/1/posts\").then(response => {\n      this.posts = response.data;\n    });\n  },\n  beforeCreate() {\n    this.$root.$on(\"onEnter\", (login, password) => {\n      if (password === \"\") {\n        this.$root.$emit(\"onEnterValidationError\", \"Password is required\");\n        return;\n      }\n\n      axios.post(\"/api/1/jwt\", {\n        login, password\n      }).then(response => {\n        localStorage.setItem(\"jwt\", response.data);\n        this.$root.$emit(\"onJwt\", response.data);\n      }).catch(error => {\n        this.$root.$emit(\"onEnterValidationError\", error.response.data);\n      });\n    });\n\n    this.$root.$on(\"onRegister\", (login, name, password) => {\n      if (password === \"\") {\n        this.$root.$emit(\"onRegisterValidationError\", \"Password is required\");\n      }\n      axios.post(\"/api/1/users/register\", {login, name, password}).then(() => {\n        this.$root.$emit(\"onEnter\", login, password);\n        this.$root.$emit(\"onChangePage\", \"Index\");\n      }).catch(error => {\n        this.$root.$emit(\"onRegisterValidationError\", error.response.data);\n      });\n    });\n\n    this.$root.$on(\"onJwt\", (jwt) => {\n      localStorage.setItem(\"jwt\", jwt);\n\n      axios.get(\"/api/1/users/auth\", {\n        params: {\n          jwt\n        }\n      }).then(response => {\n        this.user = response.data;\n        this.$root.$emit(\"onChangePage\", \"Index\");\n      }).catch(() => this.$root.$emit(\"onLogout\"))\n    });\n\n    this.$root.$on(\"onLogout\", () => {\n      localStorage.removeItem(\"jwt\");\n      this.user = null;\n    });\n\n    // this.$root.$on(\"onWritePost\", (title, text) => {\n    //   if (text === \"\") {\n    //     this.$root.$emit(\"onWritePostValidationError\", \"Text is required\");\n    //     return;\n    //   }\n    //   const login = this.user.login;\n    //   axios.post(\"/api/1/posts\", {title, text, login}).then(() => {\n    //     this.$root.$emit(\"onChangePage\", )\n    //   })\n    // })\n  }\n}\n</script>\n\n<style>\n#app {\n\n}\n</style>\n"],"sourceRoot":"src"}]}